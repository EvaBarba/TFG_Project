<!-- views/rooms/delete.ejs -->

<h1 class="mb-0" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #4a4a4a; text-transform: uppercase; font-weight: bold; letter-spacing: 1px;">Delete Room Confirmation</h1>

<br>

<form method="post" action="/rooms/<%= room.id %>?_method=DELETE">
    
    <br>

    <h4 class="card-title" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #4a4a4a; font-weight: bold; letter-spacing: 1px;">ROOM <%= room.id %>: <%= room.name %></h4>

    <br>

    <div class="form-group">
        <label for="language">Language:</label>
        <input type="language" class="form-control" id="language" name="language" value="<%= room.language %>" readonly>
    </div>

    <div class="form-group">
        <label for="date">Date:</label>
        <input type="date" class="form-control" id="date" name="date" value="<%= room.date.toISOString().split('T')[0] %>" readonly>
    </div>

    <div class="form-group">
        <label for="time_start">Start time:</label>
        <input type="time_start" class="form-control" id="time_start" name="time_start" value="<%= room.time_start %>" readonly>
    </div>

    <div class="form-group">
        <label for="time_finish">Finish Time:</label>
        <input type="time_finish" class="form-control" id="time_finish" name="time_finish" value="<%= room.time_finish %>" readonly>
    </div>

    <div class="form-group">
        <label for="place">Place:</label>
        <input type="place" class="form-control" id="place" name="place" value="<%= room.place %>" readonly>
    </div>


    <!-- Agregar el nÃºmero de booths y la tabla de booths -->
    <br>
    <div class="form-group">
        <p>Number of booths associated with this room: <b><%= room.boothsDetails.length %></b></p>
    </div>
    <br>
    <div class="form-group">
        <table class="table">
            <thead>
                <tr>
                    <th>Booths</th>
                    <th>Language To</th>
                    <th>Interpreters</th>
                </tr>
            </thead>
            <tbody>
                <% room.boothsDetails.forEach(booth => { %>
                    <tr>
                        <td>Booth <%= booth.id %></td>
                        <td><%= booth.language_a %></td>
                        <td>
                            <% 
                            const interpreters = booth.interpreters.map(interpreter => interpreter.User.username);
                            %>
                            <%= interpreters.join(', ') %>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
            
        </table>
    </div>

    
    
    <br>
    <br>
    
    <div>
        <p><b>If you delete the room, the booths belonging to the room will also be deleted.</b></p>
        <p>Are you sure you want to delete this room?</p>
    </div>
    <div class="form-group">
        <button type="submit" class="btn btn-danger">Confirm deletion</button>
        <a href="javascript:history.go(-1)" class="btn btn-outline-dark">Cancel</a>
    </div>
</form>

<br>
<br>
<br>
